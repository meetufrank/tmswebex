webpackJsonp([7],{211:function(e,t,n){"use strict";function o(e){d||n(781)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(422),r=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);var i=n(783),l=(n.n(i),n(1)),d=!1,m=o,p=Object(l.a)(r.a,i.render,i.staticRenderFns,!1,m,null,null);p.options.__file="src\\views\\own\\index.vue",t.default=p.exports},422:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(21),r=o(a),s=n(48),i=o(s),l=n(27),d=o(l);t.default={name:"own_index",data:function(){var e=this;return{confirmSub:!1,uploadUrl:"",uploadHeader:{},saveLoading:!1,rePassword:"",username:"",formItem:{nickname:"",headImg:"",oldPassword:"",password:""},ruleValidate:{nickname:[{required:!0,message:"请输入姓名",trigger:"blur"}],password:[{min:6,message:"请至少输入6个字符",trigger:"blur"},{max:32,message:"最多输入32个字符",trigger:"blur"}],rePassword:[{validator:function(t,n,o){e.formItem.password!==e.rePassword?o(new Error("两次输入密码不一致")):o()},trigger:"blur"}],oldPassword:[{validator:function(t,n,o){e.formItem.password?e.formItem.oldPassword?o():o(new Error("初始密码不得为空")):o()},trigger:"blur"}]}}},methods:{cancel:function(){this.$store.commit("removeTag","own_index"),localStorage.pageOpenedList=(0,r.default)(this.$store.state.app.pageOpenedList);var e="";e=this.$store.state.app.pageOpenedList.length>1?this.$store.state.app.pageOpenedList[1].name:this.$store.state.app.pageOpenedList[0].name,this.$router.push({name:e})},confirmSubmit:function(){this.confirmSub=!0},submit:function(){var e=this;this.$refs.myForm.validate(function(t){t&&(e.saveLoading=!0,d.default.post("User/own",e.formItem).then(function(t){1===t.data.code?(e.$Message.success(t.data.msg),e.$store.commit("logout",e),e.$router.push({name:"login"})):-14===t.data.code?(e.$store.commit("logout",e),e.$router.push({name:"login"})):e.$Message.error(t.data.msg),e.saveLoading=!1}))})},init:function(){var e=JSON.parse(sessionStorage.getItem("userInfo"));this.username=e.username,this.formItem.nickname=e.nickname,this.formItem.headImg=e.headImg,this.uploadUrl=i.default.baseUrl+"Index/upload",this.uploadHeader={ApiAuth:sessionStorage.getItem("apiAuth")}},handleImgFormatError:function(e){this.$Notice.warning({title:"文件类型不合法",desc:e.name+"的文件类型不正确，请上传jpg或者png图片。"})},handleImgRemove:function(){this.formItem.headImg=""},handleImgSuccess:function(e){1===e.code?(this.$Message.success(e.msg),this.formItem.headImg=e.data.fileUrl):this.$Message.error(e.msg)},handleImgMaxSize:function(e){this.$Notice.warning({title:"文件大小不合法",desc:e.name+"太大啦请上传小于5M的文件。"})}},mounted:function(){this.init()}}},781:function(e,t,n){var o=n(782);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=n(13).default;a("8c303922",o,!1,{})},782:function(e,t,n){t=e.exports=n(12)(!1),t.push([e.i,"\n.own-space-btn-box {\n  margin-bottom: 10px;\n}\n.own-space-btn-box button {\n  padding-left: 0;\n}\n.own-space-btn-box button span {\n  color: #2D8CF0;\n  transition: all .2s;\n}\n.own-space-btn-box button span:hover {\n  color: #0C25F1;\n  transition: all .2s;\n}\n.own-space-tra {\n  width: 10px;\n  height: 10px;\n  -webkit-transform: rotate(45deg);\n          transform: rotate(45deg);\n  position: absolute;\n  top: 50%;\n  margin-top: -6px;\n  left: -3px;\n  box-shadow: 0 0 2px 3px rgba(0, 0, 0, 0.1);\n  background-color: white;\n  z-index: 100;\n}\n.own-space-input-identifycode-con {\n  position: absolute;\n  width: 200px;\n  height: 100px;\n  right: -220px;\n  top: 50%;\n  margin-top: -50px;\n  border-radius: 4px;\n  box-shadow: 0 0 2px 3px rgba(0, 0, 0, 0.1);\n}\n.demo-upload-list {\n  display: inline-block;\n  width: 60px;\n  height: 60px;\n  text-align: center;\n  line-height: 60px;\n  border: 1px solid transparent;\n  border-radius: 4px;\n  overflow: hidden;\n  background: #fff;\n  position: relative;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);\n  margin-right: 4px;\n}\n.demo-upload-list img {\n  width: 100%;\n  height: 100%;\n}\n.demo-upload-list-cover {\n  display: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.6);\n}\n.demo-upload-list:hover .demo-upload-list-cover {\n  display: block;\n}\n.demo-upload-list-cover i {\n  color: #fff;\n  font-size: 20px;\n  cursor: pointer;\n  margin: 0 2px;\n}\n",""])},783:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[n("Icon",{attrs:{type:"person"}}),e._v("\n            个人信息\n        ")],1),e._v(" "),n("div",[n("Form",{ref:"myForm",attrs:{rules:e.ruleValidate,model:e.formItem,"label-width":80}},[n("FormItem",{attrs:{label:"用户账号",prop:"username"}},[n("div",{staticStyle:{display:"inline-block",width:"300px"}},[n("Input",{attrs:{disabled:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)]),e._v(" "),n("FormItem",{attrs:{label:"用户昵称",prop:"nickname"}},[n("div",{staticStyle:{display:"inline-block",width:"300px"}},[n("Input",{model:{value:e.formItem.nickname,callback:function(t){e.$set(e.formItem,"nickname",t)},expression:"formItem.nickname"}})],1)]),e._v(" "),n("FormItem",{attrs:{label:"用户头像",prop:"headImg"}},[e.formItem.headImg?n("div",{staticClass:"demo-upload-list"},[n("img",{attrs:{src:e.formItem.headImg}}),e._v(" "),n("div",{staticClass:"demo-upload-list-cover"},[n("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(t){e.handleImgRemove()}}})],1)]):e._e(),e._v(" "),e.formItem.headImg?n("input",{directives:[{name:"model",rawName:"v-model",value:e.formItem.headImg,expression:"formItem.headImg"}],attrs:{type:"hidden",name:"image"},domProps:{value:e.formItem.headImg},on:{input:function(t){t.target.composing||e.$set(e.formItem,"headImg",t.target.value)}}}):e._e(),e._v(" "),e.formItem.headImg?e._e():n("Upload",{staticStyle:{display:"inline-block",width:"58px"},attrs:{type:"drag",action:e.uploadUrl,headers:e.uploadHeader,format:["jpg","jpeg","png"],"max-size":5120,"on-success":e.handleImgSuccess,"on-format-error":e.handleImgFormatError,"on-exceeded-size":e.handleImgMaxSize}},[n("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[n("Icon",{attrs:{type:"camera",size:"20"}})],1)])],1),e._v(" "),n("FormItem",{attrs:{label:"原密码",prop:"oldPassword"}},[n("div",{staticStyle:{display:"inline-block",width:"300px"}},[n("Input",{attrs:{type:"password",placeholder:"请输入现在使用的密码，如需修改密码则必填"},model:{value:e.formItem.oldPassword,callback:function(t){e.$set(e.formItem,"oldPassword",t)},expression:"formItem.oldPassword"}})],1)]),e._v(" "),n("FormItem",{attrs:{label:"新密码",prop:"password"}},[n("div",{staticStyle:{display:"inline-block",width:"300px"}},[n("Input",{attrs:{type:"password",placeholder:"请输入新密码，至少6位字符"},model:{value:e.formItem.password,callback:function(t){e.$set(e.formItem,"password",t)},expression:"formItem.password"}})],1)]),e._v(" "),n("FormItem",{attrs:{label:"确认新密码",prop:"rePassword"}},[n("div",{staticStyle:{display:"inline-block",width:"300px"}},[n("Input",{attrs:{type:"password",placeholder:"请再次输入新密码"},model:{value:e.rePassword,callback:function(t){e.rePassword=t},expression:"rePassword"}})],1)]),e._v(" "),n("div",[n("Button",{staticStyle:{width:"100px"},attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),n("Button",{staticStyle:{width:"100px"},attrs:{type:"primary",loading:e.saveLoading},on:{click:e.confirmSubmit}},[e._v("保存")])],1)],1)],1)]),e._v(" "),n("Modal",{attrs:{width:"360"},model:{value:e.confirmSub,callback:function(t){e.confirmSub=t},expression:"confirmSub"}},[n("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"information-circled"}}),e._v(" "),n("span",[e._v("确定要提交么")])],1),e._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("p",[e._v("个人信息修改后，将会退出系统重新登录，请明确后修改！")])]),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"error",size:"large",long:""},on:{click:e.submit}},[e._v("确定修改")])],1)])],1)},a=[];o._withStripped=!0,t.render=o,t.staticRenderFns=a}});